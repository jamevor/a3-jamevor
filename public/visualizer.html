<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>

      <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

<header>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="index.html">Doughboyz Catering</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="login.html">Log In <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="results.html">Results</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="userInfo.html">Order</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="visualizer.html">Visualizer</a>
      </li>
    </ul>
  </div>
</nav>
</header>
  
  <head></head>
  <body><button>click me</button></body>
  <script>
  const start = function() {
    document.body.innerHTML = ''
    const canvas = document.createElement( 'canvas' )
    document.body.appendChild( canvas )
    canvas.width = canvas.height = 512
    const ctx = canvas.getContext( '2d' )

    // audio init
    const audioCtx = new AudioContext()
    const audioElement = document.createElement( 'audio' )
    document.body.appendChild( audioElement )

    // audio graph setup
    const analyser = audioCtx.createAnalyser()
    analyser.fftSize = 1024 // 512 bins
    const player = audioCtx.createMediaElementSource( audioElement )
    player.connect( audioCtx.destination )
    player.connect( analyser )
    
    audioElement.crossOrigin = "anonymous";
    audioElement.src = 'https://cdn.glitch.com/c0bc4e4f-1b1c-4616-8f9c-a5cd093dd42c%2Ftrumpet.wav?v=1568948011636'

    audioElement.play()
    audioElement.loop = true;

    const results = new Uint8Array( analyser.frequencyBinCount )

    draw = function() {
      // temporal recursion, call tthe function in the future
      window.requestAnimationFrame( draw )
      
      ctx.fillStyle = 'black' 
      ctx.fillRect( 0,0,canvas.width,canvas.height )
      ctx.fillStyle = 'white'
      ctx.arc(95,50,40,0,2*Math.PI);
 
      
      analyser.getByteFrequencyData( results )
      
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( i, 0, 1, results[i] ) // upside down
      }
      
      
      ctx.fillStyle = 'green';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( i, 0, 1, 2 * results[i]/3 ) // upside down
      }
      
      ctx.fillStyle = 'red';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( 0, i, 2 * results[i]/4, 1 ) // upside down
      }
      ctx.fillStyle = 'cyan';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( i, 0, 1, 2 * results[i]/5 ) // upside down
      }
      ctx.fillStyle = 'orange';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( 0, i, 2 * results[i]/6, 1 ) // upside down
      }
      ctx.fillStyle = 'blue';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( i, 0, 1, 2 * results[i]/7 ) // upside down
      }
      ctx.fillStyle = 'yellow';
      for( let i = 0; i < analyser.frequencyBinCount; i++ ) {
        ctx.fillRect( 0, i, 2 * results[i]/8, 1 ) // upside down
      }
    
    }
    draw()
  }

  window.onload = ()=> document.querySelector('button').onclick = start
  </script>
</html>